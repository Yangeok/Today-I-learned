# NAT(Network Address Translation)

- 1:1
  - 사설 IP `192.168.0.1`를 가진 컴퓨터가 DNS 서버 `168.126.63.1`로 요청
  - NAT시켜주는 방화벽이 사설 IP `192.168.0.1`를 공인 IP `1.254.223.4`로 변경
  - DNS 서버는 `1.254.223.4`로부터 받은 요청에 대한 응답을 함
  - 방화벽은 `168.126.63.1`로부터 응답을 받음
  - `1.254.223.4`로 가는 패킷을 NAT 테이블을 참조해서 `1.254.223.4`가 사설 IP `192.168.0.1`임을 확인
  - 패킷을 `192.168.0.1`로 전달
- 1:N
  - 사설 IP `192.168.0.1`를 가진 컴퓨터가 DNS 서버 `8.8.8.8`로 요청
  - NAT시켜주는 방화벽이 사설 IP `192.168.0.1`를 공인 IP에 포트를 붙인 `201.80.7.22:60001`로 변경
  - 사설 IP `192.168.0.2`를 가진 컴퓨터가 DNS 서버 `8.8.8.8`로 요청
  - NAT시켜주는 방화벽이 사설 IP `192.168.0.2`를 공인 IP에 포트를 붙인 `201.80.7.22:60002`로 변경
  - DNS 서버는 `201.80.7.22:60001`, `:60002`로부터 받은 요청에 대한 응답을 함
  - 방화벽은 `8.8.8.8`로부터 응답을 받음
  - `201.80.7.22:60001`, `:60002`로 가는 패킷을 NAT 테이블을 참조해서 `201.80.7.22:60001`이 사설 IP `192.168.0.1`이고, `201.80.7.22:60002`가 `192.168.0.2`임을 확인
  - 패킷을 `192.168.0.1`, `.2`로 전달
- 중요
  - 1:1 NAT는 외부에서 공인 IP를 찾아 들어갈 수 있다
  - 1:N PAT(Port Address Translation)는 외부에서 공인 IP를 찾아 들어갈 수 없다
